Описание проекта
Данный проект представляет собой оконное приложение с графическим пользовательским интерфейсом (GUI), разработанное на языке Python с использованием библиотеки PyQt5. Приложение предназначено для управления данными о спортивных турнирах и реализовано в соответствии с шаблоном проектирования Model-View-Controller (MVC). Оно поддерживает добавление, поиск, удаление и отображение записей о турнирах, а также сохранение данных в формате XML.

Цель
Изучить принципы построения графического интерфейса.
Разработать программную систему для управления данными о турнирах с использованием MVC.
Требования
Реализация шаблона MVC.
Добавление записей через диалоговое окно.
Поиск и удаление записей по заданным условиям.
Отображение записей в главном окне с пагинацией и в виде дерева.
Хранение данных в базе SQLite3 и экспорт в XML.
Интерфейс с меню и панелью инструментов.
Архитектура приложения
Приложение построено по шаблону MVC, разделяя логику на три основных компонента:

1. Модель (TournamentModel)
Описание: Отвечает за управление данными и взаимодействие с базой данных SQLite3.
Функционал:
Создание таблицы tournaments с полями: id, name, date, sport, winner, prize_money, winner_earnings.
Добавление записей (add_tournament), где winner_earnings автоматически рассчитывается как 60% от prize_money.
Получение всех записей (get_all_tournaments).
Поиск записей по условиям (search_tournaments).
Удаление записей по условиям (delete_tournaments).
Сохранение данных в XML с использованием DOM-парсера (save_to_xml).
Технологии: SQLite3 для базы данных, xml.dom.minidom для работы с XML.
2. Контроллер (TournamentController)
Описание: Связывает модель и представление, обрабатывая действия пользователя.
Функционал:
Добавление турнира с валидацией призовых (add_tournament).
Выполнение поиска (search_tournaments).
Удаление записей (delete_tournaments).
Сохранение в XML (save_to_xml).
Особенности: Обеспечивает обновление интерфейса после операций с данными.
3. Представление (TournamentView)
Описание: Реализует графический интерфейс с использованием PyQt5.
Компоненты:
Главное окно: Таблица с пагинацией, панель инструментов, кнопка для отображения дерева.
Диалоги: Добавление, поиск, удаление турниров.
Технологии: PyQt5 (QMainWindow, QTableWidget, QDialog, QCalendarWidget, QTreeWidget, и др.).
Структура кода
Используемые библиотеки
sys: Для запуска приложения.
sqlite3: Работа с базой данных SQLite.
PyQt5.QtWidgets: Компоненты интерфейса (окна, таблицы, кнопки, диалоги).
PyQt5.QtCore: Базовые утилиты (например, Qt).
xml.dom.minidom: Генерация XML-файлов.
Основные классы
TournamentModel:
Методы: create_table, add_tournament, get_all_tournaments, search_tournaments, delete_tournaments, save_to_xml.
Хранит подключение к базе данных (self.conn).
TournamentController:
Методы: add_tournament, search_tournaments, delete_tournaments, save_to_xml.
Связывает модель и представление.
TournamentView:
Инициализация интерфейса: таблица, панель инструментов, пагинация, кнопка дерева.
Методы для обновления отображения (update_display) и управления страницами (first_page, prev_page, next_page, last_page).
Диалоги: show_add_dialog, show_search_dialog, show_delete_dialog, show_tree_view.
Функционал приложения
Главное окно
Таблица: Отображает записи с полями: ID, Название, Дата, Спорт, Победитель, Призовые, Заработок.
Пагинация: Поддерживает переход между страницами (Первая, Пред., След., Последняя) и настройку числа записей на странице (по умолчанию 10).
Панель инструментов: Кнопки "Добавить", "Поиск", "Удалить", "Сохранить в XML".
Диалоги
Добавление турнира:
Поля: Название, Дата (календарь), Вид спорта, Победитель, Призовые.
Валидация: Призовые должны быть числом.
Поиск турниров:
Условия: Название, Дата, Вид спорта (выпадающий список), Победитель, Призовые (мин/макс).
Результаты отображаются в таблице внутри диалога.
Удаление турниров:
Те же условия, что и для поиска.
Уведомление о количестве удалённых записей.
Дерево турниров:
Отображает записи в виде дерева, где каждая запись — узел с подузлами (полями).
Хранение данных
База данных: SQLite3 (tournaments.db).
Экспорт: Сохранение в XML через стандартный диалог выбора файла.
Сценарии демонстрации
Добавление записи:
Нажать "Добавить" на панели инструментов.
Ввести данные: "Чемпионат мира", "2023-01-01", "Футбол", "Бразилия", "1000000".
Нажать "Добавить" — запись появляется в таблице.
Поиск записей:
Нажать "Поиск".
Ввести условие, например, "Спорт: Футбол".
Нажать "Поиск" — отобразятся все футбольные турниры.
Удаление записей:
Нажать "Удалить".
Указать "Призовые (мин): 1000000".
Нажать "Удалить" — удалятся турниры с призовыми ≥ 1 млн, появится сообщение о количестве удалённых.
Отображение дерева:
Нажать "Показать дерево".
Просмотреть иерархическое представление всех записей.
Сохранение в XML:
Нажать "Сохранить в XML".
Выбрать имя файла (например, tournaments.xml) — данные экспортируются.
